<!DOCTYPE html>
<html lang="en">
<head>
    <title>Dashboard</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Stock+" />
    <link rel="stylesheet" href="styles/main.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="icon" type="image/x-icon" href="images/logo/favicon.png">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <header>
        <%- include('../partials/header') %>
    </header>
    <main id="dashboard">
        <h1>Dashboard</h1>
        <h1>Good Evening, <%= user %></h1>

        <section class="stats">
            <div class="statsCard">
                <div class="statsIcon">
                    <span class="material-symbols-outlined">docs</span>
                </div>
                <div class="statsInfo">
                    <h1>Documents</h1>
                    <p><%= totalDocuments %></p>
                </div>
            </div>
            <div class="statsCard">
                <div class="statsIcon">
                    <span class="material-symbols-outlined">shelves</span>
                </div>
                <div class="statsInfo">
                    <h1>Total Stock</h1>
                    <p><%= totalStock %></p>
                </div>
            </div>
            <div class="statsCard">
                <div class="statsIcon">
                    <span class="material-symbols-outlined">person</span>
                </div>
                <div class="statsInfo">
                    <h1>Users</h1>
                    <p><%= totalUsers %></p>
                </div>
            </div>
        </section>
        <section>
            <div class="dashboard-panel">
                <h2>Low Stock Alerts <small>(Less than <%= LOW_STOCK_THRESHOLD %> items)</small><button class="printBtn" onclick="window.print()">Print</button></h2>

                <%# Check if the lowStockItems array has items in it %>
                <% if (lowStockItems && lowStockItems.length > 0) { %>
                    <table class="low-stock-table">
                        <thead>
                            <tr>
                                <th>Product Name</th>
                                <th>Product Code</th>
                                <th>Barcode</th>
                                <th>Quantity Remaining</th>
                            </tr>
                        </thead>
                        <tbody>
                            <%# Loop through each low stock item and create a table row %>
                            <% lowStockItems.forEach(item => { %>
                                <tr>
                                    <td><%= item.productName %></td>
                                    <td><%= item.productCode %></td>
                                    <td><%= item.barcode %></td>
                                    <td class="low-stock-qty"><%= item.qty %></td>
                                </tr>
                            <% }) %>
                        </tbody>
                    </table>
                <% } else { %>
                    <%# This message shows if there are no low stock items %>
                    <p class="all-stocked-up">üëç Great job! No items are currently low on stock.</p>
                <% } %>
            </div>
        </section>




       







    </main>
</body>
</html>